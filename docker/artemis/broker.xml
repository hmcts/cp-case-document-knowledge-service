<?xml version='1.0'?>
<configuration xmlns="urn:activemq"
               xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
               xsi:schemaLocation="urn:activemq /schema/artemis-configuration.xsd">
    <core xmlns="urn:activemq:core">

        <name>0.0.0.0</name>

        <persistence-enabled>true</persistence-enabled>
        <journal-type>ASYNCIO</journal-type>

        <paging-directory>./data/paging</paging-directory>
        <bindings-directory>./data/bindings</bindings-directory>
        <journal-directory>./data/journal</journal-directory>
        <large-messages-directory>./data/large-messages</large-messages-directory>

        <journal-datasync>true</journal-datasync>
        <journal-min-files>2</journal-min-files>
        <journal-pool-files>-1</journal-pool-files>
        <journal-file-size>10M</journal-file-size>
        <journal-buffer-timeout>500000</journal-buffer-timeout>
        <journal-max-io>4096</journal-max-io>

        <disk-scan-period>5000</disk-scan-period>
        <max-disk-usage>95</max-disk-usage>

        <critical-analyzer>true</critical-analyzer>
        <critical-analyzer-timeout>120000</critical-analyzer-timeout>
        <critical-analyzer-check-period>60000</critical-analyzer-check-period>
        <critical-analyzer-policy>LOG</critical-analyzer-policy>

        <page-sync-timeout>3333333</page-sync-timeout>
        <security-enabled>false</security-enabled>

        <acceptors>
            <acceptor name="invm-acceptor">vm://0</acceptor>
            <!-- TLS Acceptor: keystore is mounted at /var/lib/artemis-instance/etc/keystore.jks -->
            <acceptor name="netty-acceptor">
                tcp://0.0.0.0:61617?tcpSendBufferSize=1048576;tcpReceiveBufferSize=1048576;sslEnabled=true;keyStorePath=/var/lib/artemis-instance/etc/keystore.jks;keyStorePassword=changeit;
            </acceptor>
        </acceptors>

        <security-settings>
            <security-setting match="#">
                <permission type="createNonDurableQueue" roles="amq"/>
                <permission type="deleteNonDurableQueue" roles="amq"/>
                <permission type="createDurableQueue" roles="amq"/>
                <permission type="deleteDurableQueue" roles="amq"/>
                <permission type="createAddress" roles="amq"/>
                <permission type="deleteAddress" roles="amq"/>
                <permission type="consume" roles="amq"/>
                <permission type="browse" roles="amq"/>
                <permission type="send" roles="amq"/>
                <permission type="manage" roles="amq"/>
            </security-setting>
        </security-settings>

        <address-settings>
            <address-setting match="#">
                <dead-letter-address>jms.queue.DLQ</dead-letter-address>
                <expiry-address>jms.queue.ExpiryQueue</expiry-address>
                <max-redelivery-delay>60000</max-redelivery-delay>
                <redelivery-delay>1000</redelivery-delay>
                <redelivery-delay-multiplier>1.5</redelivery-delay-multiplier>
                <redistribution-delay>1000</redistribution-delay>
                <max-size-bytes>52428800</max-size-bytes>
                <message-counter-history-day-limit>10</message-counter-history-day-limit>
                <address-full-policy>PAGE</address-full-policy>
                <max-delivery-attempts>10</max-delivery-attempts>
                <auto-create-queues>false</auto-create-queues>
                <auto-create-addresses>false</auto-create-addresses>
                <auto-create-jms-queues>false</auto-create-jms-queues>
                <auto-create-jms-topics>false</auto-create-jms-topics>
            </address-setting>
        </address-settings>

        <addresses>
            <address name="jms.queue.DLQ">
                <anycast><queue name="jms.queue.DLQ"/></anycast>
            </address>
            <address name="jms.queue.ExpiryQueue">
                <anycast><queue name="jms.queue.ExpiryQueue"/></anycast>
            </address>
            <address name="jms.topic.auditing.event">
                <multicast/>
            </address>
        </addresses>

    </core>
</configuration>
